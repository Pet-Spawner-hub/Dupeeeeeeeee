local player = game.Players.LocalPlayer
local mouse = player:GetMouse()

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PetDupeGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Draggable Duplicate Button
local dupeButton = Instance.new("TextButton")
dupeButton.Name = "DuplicateButton"
dupeButton.Size = UDim2.new(0, 160, 0, 50)
dupeButton.Position = UDim2.new(0.5, -80, 0.9, -25)
dupeButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Black
dupeButton.TextColor3 = Color3.new(1, 1, 1)
dupeButton.Font = Enum.Font.SourceSansBold
dupeButton.TextSize = 22
dupeButton.Text = "Duplicate"
dupeButton.Draggable = true
dupeButton.Active = true
dupeButton.Selectable = true
dupeButton.Parent = screenGui

-- Duplication Message
local messageLabel = Instance.new("TextLabel")
messageLabel.Size = UDim2.new(0, 250, 0, 40)
messageLabel.Position = UDim2.new(0.5, -125, 0.75, -25)
messageLabel.BackgroundColor3 = Color3.new(0, 0, 0)
messageLabel.TextColor3 = Color3.new(1, 1, 1)
messageLabel.Font = Enum.Font.SourceSansBold
messageLabel.TextSize = 20
messageLabel.Text = ""
messageLabel.Visible = false
messageLabel.Parent = screenGui

-- Folder for visual pet clones
local clonesFolder = workspace:FindFirstChild("VisualPetClones") or Instance.new("Folder")
clonesFolder.Name = "VisualPetClones"
clonesFolder.Parent = workspace

-- Fake Inventory Folder (for visual inventory)
local inventoryFolder = player:FindFirstChild("FakeInventory") or Instance.new("Folder")
inventoryFolder.Name = "FakeInventory"
inventoryFolder.Parent = player

-- Function to get held pet model from the equipped Tool
local function getHeldPet()
	local character = player.Character or player.CharacterAdded:Wait()
	local tool = character:FindFirstChildOfClass("Tool")
	if not tool then return nil, nil end

	local pet = tool:FindFirstChildWhichIsA("Model") or tool:FindFirstChild("Pet")
	return pet, tool
end

-- Duplication Logic
local function duplicatePet()
	local heldPet, tool = getHeldPet()
	if not heldPet or not tool then
		warn("No pet is currently being held!")
		return
	end

	-- Show the "Duping in 3 minutes..." message
	messageLabel.Text = "Duping in 3 minutes..."
	messageLabel.Visible = true

	-- Delay for 3 minutes (180 seconds)
	task.delay(180, function()
		messageLabel.Visible = false

		-- Clone the held pet
		local clone = heldPet:Clone()
		clone.Name = heldPet.Name .. "_Clone"

		-- Position clone near the player
		if clone:IsA("Model") then
			if not clone.PrimaryPart then
				local primary = clone:FindFirstChildWhichIsA("BasePart")
				if primary then clone.PrimaryPart = primary end
			end
			if clone.PrimaryPart and player.Character then
				local offset = Vector3.new(math.random(-5,5), 0, math.random(-5,5))
				clone:SetPrimaryPartCFrame(player.Character.PrimaryPart.CFrame + offset)
			end
		end

		-- Copy Age and Weight values
		local age = heldPet:FindFirstChild("Age")
		local weight = heldPet:FindFirstChild("Weight")

		if age then
			local ageClone = age:Clone()
			ageClone.Parent = clone
		end
		if weight then
			local weightClone = weight:Clone()
			weightClone.Parent = clone
		end

		-- Add to world (workspace)
		clone.Parent = clonesFolder

		-- Also create a copy for the fake inventory
		local inventoryCopy = clone:Clone()
		inventoryCopy.Parent = inventoryFolder

		print("âœ… Visual pet duplicated and added to world and visual inventory.")
	end)
end

-- Connect the button click to duplication
dupeButton.MouseButton1Click:Connect(duplicatePet)



